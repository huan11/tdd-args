## 思考题1

现在要替换实现方式，要求改变函数签名（加一个参数，用于异常判断），在新的地方使用新的函数签名，如何做？

1. 复制一个新的函数
2. 添加签名
3. 查找所有调用的地方，进行手动替换



有没有更好的方式？



## 思考题2

作者在哪些场景下使用了 使用工厂方法替换构造函数？

1. 目的：重组代码结构--让上下文相关的部分放到一起
   干掉继承
   1. 在工厂方法里面实现了继承的方法
   1. 将工厂方法从 Bool 搬到 Single
2. 目的：【ceef554a】复用代码，让结构相似的 StringParser 和 IntParser 复用代码
   1. 【准备工作-相同代码（parse）通过继承复用】：
      1. 通过extract 方法（隔离变化），让相同的结构的地方呈现出来 parse
      2. 修改 StringParser 继承 IntParser，复用相同结构
   2. 【准备工作-统一变化的部分 parseValue】
      1. StringParser Override IntParser 的 parseValue
      2. 将 parseValue的实现 通过提取函数变量的方法先提取到 class 级别的成员中，这样代码传递实现。
      3. 在父类中生成新的构造方法，从而可以让子类复用构造函数。（这个构造函数后续不删除）
   3. 【工厂方法操作】
      1. 在 StringParser 和IntParser 中都生成构造函数
         1. 子类调用父类的构造方法进行代码复用。
         2. 删除子类似的实现（parseValue）
      2. Inline 变化手术室parseValue
      3. **工厂方法操作子类**（最后一系列操作的效果就是，所有实现都用了父类的实现方式）：
         1. 工厂方法里面调用 父类构造方法进行等价实现
         2. 清理子类构造函数
         3. 内联工厂方法
         4. 清理类
      4. **工厂方法操作父类**
         1. 工厂方法使用新的构造函数进行等价实现（包含可以传递Function的方法 valueParser 的构造函数）
         2. 清理父类无参构造
         3. 内联工厂方法



